/* ============================================= */
/* NIMBLE SELECTOR MODULE                        */
/* Uses Nimble v2 system CSS custom properties   */
/* ============================================= */

/* --- Base Layout --- */

.nimble-selector {
	font-family: var(--nimble-primary-font, 'Roboto Condensed', sans-serif);
	color: var(--nimble-dark-text-color, hsl(50, 14%, 9%));
	background: var(--nimble-sheet-background, hsl(0, 0%, 96%));
	padding: 0;
}

.nimble-selector .window-content {
	padding: 0;
	overflow-y: auto;
}

/* --- Panel Header --- */

.nimble-selector__header {
	background: var(--nimble-navigation-background-color, hsl(0, 0%, 24%));
	color: var(--nimble-navigation-text-color, hsl(38, 38%, 94%));
	padding: 0.75rem 1rem;
	display: flex;
	align-items: center;
	gap: 0.75rem;
}

.nimble-selector__header-icon {
	font-size: var(--nimble-xl-text, 1.44rem);
}

.nimble-selector__header-info {
	flex: 1;
}

.nimble-selector__header-title {
	font-size: var(--nimble-lg-text, 1.2rem);
	font-weight: 700;
	margin: 0;
}

.nimble-selector__header-subtitle {
	font-size: var(--nimble-sm-text, 0.833rem);
	opacity: 0.8;
	margin: 0;
}

/* --- Sections --- */

.nimble-selector__body {
	padding: 0.75rem;
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
}

.nimble-selector__section {
	border: 1px solid var(--nimble-card-border-color, hsla(41, 18%, 54%, 25%));
	border-radius: 4px;
	overflow: hidden;
}

.nimble-selector__section-header {
	background: var(--nimble-navigation-background-color, hsl(0, 0%, 24%));
	color: var(--nimble-light-text-color, hsl(38, 38%, 94%));
	padding: 0.4rem 0.75rem;
	display: flex;
	align-items: center;
	justify-content: space-between;
	font-size: var(--nimble-md-text, 1rem);
	font-weight: 600;
	cursor: pointer;
	user-select: none;
}

.nimble-selector__section-header i {
	margin-right: 0.5rem;
}

.nimble-selector__section-badge {
	background: var(--nimble-selected-tag-background-color, hsl(293, 10%, 35%));
	color: white;
	border-radius: 10px;
	padding: 0.1rem 0.5rem;
	font-size: var(--nimble-xs-text, 0.694rem);
	font-weight: 700;
}

.nimble-selector__section-body {
	background: var(--nimble-box-background-color, hsl(48, 17%, 97%));
	padding: 0.5rem;
}

/* --- Cards --- */

.nimble-selector__card-grid {
	display: grid;
	grid-template-columns: 1fr;
	gap: 0.4rem;
}

.nimble-selector__card {
	background: var(--nimble-box-background-color, hsl(48, 17%, 97%));
	border: 1px solid var(--nimble-card-border-color, hsla(41, 18%, 54%, 25%));
	border-radius: 4px;
	padding: 0.5rem;
	display: flex;
	align-items: center;
	gap: 0.5rem;
	transition: var(--nimble-standard-transition, all 0.15s ease-in-out);
	cursor: pointer;
}

.nimble-selector__card:hover {
	box-shadow: var(--nimble-card-box-shadow, hsla(0, 0%, 0%, 0.24) 0 3px 8px);
}

.nimble-selector__card--selected {
	border-color: var(--nimble-selected-tag-background-color, hsl(293, 10%, 35%));
	box-shadow: 0 0 0 2px var(--nimble-selected-tag-background-color, hsl(293, 10%, 35%));
	background: hsla(293, 10%, 35%, 0.05);
}

.nimble-selector__card--owned {
	opacity: 0.6;
	border-style: dashed;
}

.nimble-selector__card-img {
	width: 36px;
	height: 36px;
	border-radius: 3px;
	object-fit: cover;
	flex-shrink: 0;
	border: 1px solid var(--nimble-card-border-color, hsla(41, 18%, 54%, 25%));
}

.nimble-selector__card-content {
	flex: 1;
	min-width: 0;
}

.nimble-selector__card-name {
	font-weight: 600;
	font-size: var(--nimble-md-text, 1rem);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.nimble-selector__card-meta {
	font-size: var(--nimble-xs-text, 0.694rem);
	color: var(--nimble-medium-text-color, hsl(50, 14%, 35%));
}

.nimble-selector__card-checkbox {
	width: 18px;
	height: 18px;
	flex-shrink: 0;
	pointer-events: none;
}

.nimble-selector__card-owned-tag {
	font-size: var(--nimble-xxs-text, 0.579rem);
	color: var(--nimble-roll-success-color, hsl(109, 76%, 18%));
	background: var(--nimble-roll-success-background-color, hsl(105, 16%, 62%));
	padding: 0.1rem 0.4rem;
	border-radius: 3px;
	font-weight: 700;
	text-transform: uppercase;
}

/* --- Selectable Group Badge --- */

.nimble-selector__group-badge {
	display: inline-flex;
	align-items: center;
	gap: 0.2rem;
	background: var(--nimble-hint-background-color, hsla(223, 14%, 45%, 0.1));
	border: 1px solid var(--nimble-hint-border-color, hsla(223, 14%, 45%, 0.2));
	border-radius: 3px;
	padding: 0.05rem 0.4rem;
	font-size: var(--nimble-xxs-text, 0.579rem);
	font-weight: 600;
	color: var(--nimble-accent-color, hsl(223, 14%, 45%));
	white-space: nowrap;
}

.nimble-selector__group-badge i {
	font-size: 0.55rem;
}

/* --- Level Group --- */

.nimble-selector__level-group {
	margin-bottom: 0.5rem;
}

.nimble-selector__level-label {
	font-size: var(--nimble-sm-text, 0.833rem);
	font-weight: 700;
	color: var(--nimble-accent-color, hsl(223, 14%, 45%));
	padding: 0.2rem 0;
	border-bottom: 1px solid var(--nimble-card-border-color, hsla(41, 18%, 54%, 25%));
	margin-bottom: 0.3rem;
}

/* --- Filter Bar --- */

.nimble-selector__filter-bar {
	display: flex;
	flex-wrap: wrap;
	gap: 0.3rem;
	padding: 0.5rem;
	background: var(--nimble-navigation-background-color, hsl(0, 0%, 24%));
}

.nimble-selector__filter-btn {
	display: inline-flex;
	align-items: center;
	gap: 0.3rem;
	padding: 0.25rem 0.6rem;
	border: 1px solid rgba(255, 255, 255, 0.2);
	border-radius: 14px;
	background: transparent;
	color: var(--nimble-navigation-text-color, hsl(38, 38%, 94%));
	font-family: var(--nimble-primary-font, 'Roboto Condensed', sans-serif);
	font-size: var(--nimble-sm-text, 0.833rem);
	cursor: pointer;
	transition: var(--nimble-standard-transition, all 0.15s ease-in-out);
}

.nimble-selector__filter-btn:hover {
	background: rgba(255, 255, 255, 0.1);
}

.nimble-selector__filter-btn--active {
	background: var(--nimble-selected-tag-background-color, hsl(293, 10%, 35%));
	border-color: var(--nimble-selected-tag-background-color, hsl(293, 10%, 35%));
	color: white;
}

/* --- Spell School Colors --- */

.nimble-selector__school-icon--fire { color: #e74c3c; }
.nimble-selector__school-icon--ice { color: #3498db; }
.nimble-selector__school-icon--lightning { color: #f1c40f; }
.nimble-selector__school-icon--necrotic { color: #8e44ad; }
.nimble-selector__school-icon--radiant { color: #f39c12; }
.nimble-selector__school-icon--wind { color: #1abc9c; }
.nimble-selector__school-icon--secret { color: #7f8c8d; }
.nimble-selector__school-icon--utility { color: #95a5a6; }

.nimble-selector__spell-tier-badge {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 20px;
	height: 20px;
	border-radius: 3px;
	font-size: var(--nimble-xxs-text, 0.579rem);
	font-weight: 700;
	color: white;
	padding: 0 0.3rem;
}

.nimble-selector__spell-tier-badge--cantrip { background: #95a5a6; }
.nimble-selector__spell-tier-badge--1 { background: #27ae60; }
.nimble-selector__spell-tier-badge--2 { background: #2980b9; }
.nimble-selector__spell-tier-badge--3 { background: #8e44ad; }
.nimble-selector__spell-tier-badge--4 { background: #c0392b; }
.nimble-selector__spell-tier-badge--5 { background: #d35400; }
.nimble-selector__spell-tier-badge--6 { background: #e74c3c; }
.nimble-selector__spell-tier-badge--7 { background: #c0392b; }
.nimble-selector__spell-tier-badge--8 { background: #7d3c98; }
.nimble-selector__spell-tier-badge--9 { background: #1a1a2e; }
.nimble-selector__spell-tier-badge--utility { background: #7f8c8d; }

/* --- Buttons --- */

.nimble-selector__actions {
	display: flex;
	gap: 0.5rem;
	padding: 0.75rem;
	justify-content: flex-end;
	border-top: 1px solid var(--nimble-card-border-color, hsla(41, 18%, 54%, 25%));
}

.nimble-selector__btn {
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	padding: 0.4rem 1rem;
	border: 1px solid var(--nimble-input-border-color, hsl(41, 18%, 54%));
	border-radius: 4px;
	background: var(--nimble-basic-button-background-color, hsl(41, 18%, 80%));
	color: var(--nimble-dark-text-color, hsl(50, 14%, 9%));
	font-family: var(--nimble-primary-font, 'Roboto Condensed', sans-serif);
	font-size: var(--nimble-md-text, 1rem);
	font-weight: 600;
	cursor: pointer;
	transition: var(--nimble-standard-transition, all 0.15s ease-in-out);
}

.nimble-selector__btn:hover {
	box-shadow: var(--nimble-box-shadow, 0 0 6px hsla(0, 0%, 0%, 0.2));
}

.nimble-selector__btn--small {
	padding: 0.2rem 0.6rem;
	font-size: var(--nimble-sm-text, 0.833rem);
}

.nimble-selector__btn:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

/* --- Select All / Deselect --- */

.nimble-selector__bulk-actions {
	display: flex;
	gap: 0.3rem;
	padding: 0.3rem 0.5rem;
	border-bottom: 1px solid var(--nimble-card-border-color, hsla(41, 18%, 54%, 25%));
}

/* --- Empty State --- */

.nimble-selector__empty {
	text-align: center;
	padding: 1.5rem;
	color: var(--nimble-medium-text-color, hsl(50, 14%, 35%));
	font-style: italic;
}

/* --- Equipment Category Tabs --- */

.nimble-selector__category-tabs {
	display: flex;
	gap: 0;
	border-bottom: 2px solid var(--nimble-navigation-background-color, hsl(0, 0%, 24%));
}

.nimble-selector__category-tab {
	padding: 0.4rem 0.8rem;
	font-family: var(--nimble-primary-font, 'Roboto Condensed', sans-serif);
	font-size: var(--nimble-sm-text, 0.833rem);
	font-weight: 600;
	background: transparent;
	color: var(--nimble-medium-text-color, hsl(50, 14%, 35%));
	border: none;
	border-bottom: 2px solid transparent;
	cursor: pointer;
	transition: var(--nimble-standard-transition, all 0.15s ease-in-out);
	margin-bottom: -2px;
}

.nimble-selector__category-tab:hover {
	color: var(--nimble-dark-text-color, hsl(50, 14%, 9%));
}

.nimble-selector__category-tab--active {
	color: var(--nimble-secondary-navigation-active-text-color, hsl(1, 51%, 34%));
	border-bottom-color: var(--nimble-secondary-navigation-active-text-color, hsl(1, 51%, 34%));
}

/* --- Scrollable Content --- */

.nimble-selector__scroll-area {
	max-height: 400px;
	overflow-y: auto;
	padding: 0.5rem;
}

/* --- Notification --- */

.nimble-selector__notification {
	background: var(--nimble-hint-background-color, hsla(223, 14%, 45%, 0.1));
	border: 1px solid var(--nimble-hint-border-color);
	border-radius: 4px;
	padding: 0.5rem 0.75rem;
	font-size: var(--nimble-sm-text, 0.833rem);
	display: flex;
	align-items: center;
	gap: 0.5rem;
}

.nimble-selector__notification i {
	color: var(--nimble-hint-icon-color, hsl(0, 0%, 24%));
}
